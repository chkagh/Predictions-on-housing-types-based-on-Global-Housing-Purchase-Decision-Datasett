# -*- coding: utf-8 -*-
"""Lab_2.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1KtTzOe7-l7OWIuZOtEdtb4_iI5u-Jy6C

**Link do bazy danych:**

https://www.kaggle.com/datasets/mohankrishnathalla/global-house-purchase-decision-dataset
"""

import pandas as pd
sns.set_theme()

data_project = pd.read_csv('/content/drive/MyDrive/Colab Notebooks/Lab_2/global_house_purchase_dataset.csv', sep = ',')
data_project.head()
data_project.describe()

import matplotlib.pyplot as plt
import seaborn as sns

plt.figure(figsize=(12, 6))
sns.boxplot(data=data_project, x='property_type', y='bathrooms', palette='pastel')
plt.title('Number of bathrooms by property type')
plt.xlabel('Property type')
plt.ylabel('Number of bathrooms')
plt.xticks(rotation=45, ha='right')
plt.tight_layout()
plt.show()

import matplotlib.pyplot as plt
import seaborn as sns

plt.figure(figsize=(12, 6))
sns.boxplot(data=data_project, x='property_type', y='rooms', palette='pastel')
plt.title('Number of rooms by property type')
plt.xlabel('Property type')
plt.ylabel('Number of rooms')
plt.xticks(rotation=45, ha='right')
plt.tight_layout()
plt.show()

data_train.hist(figsize=(20, 15),color='pink')
plt.xlabel('Quality')
plt.ylabel('Count')
plt.show()

plt.figure(figsize=(12, 6))
sns.boxplot(data=data_train, orient='h', palette="Set1")
plt.ylabel("Features")
plt.xlabel("Value")
plt.title("House buying dataset")
plt.show()

plt.figure(figsize=(25, 6))
corr = data_train.corr(numeric_only=True)
sns.heatmap(corr, annot=True, cmap='PiYG')
plt.title('Correlation Heatmap for house buying dataset')

sns.scatterplot(x=data_project['loan_amount'], y=data_project['price'],hue=data_project['decision'])
plt.title('Loan amount vs Price')
plt.xlabel('Loan Amount')
plt.ylabel('Price')
plt.show()

plt.figure(figsize=(10, 6))
sns.scatterplot(x=data_project['property_type'], y=data_project['rooms'], s=500, color='green')
plt.title('Property Type vs Rooms')
plt.xlabel('Property Type')
plt.ylabel('Rooms')
plt.show()
plt.savefig('PropertyTypeVSRooms.png', dpi = 600)

# Boxplot for price by country
plt.figure(figsize=(15, 6))
sns.boxplot(x=data_project['country'], y=data_project['price'], palette='pastel')
plt.title('Price by Country')
plt.xlabel('Country')
plt.ylabel('Price')
plt.xticks(rotation=45, ha='right')
plt.tight_layout()
plt.show()

# # Boxplot for price by city
# plt.figure(figsize=(20, 8))
# sns.boxplot(x=data_project['city'], y=data_project['price'])
# plt.title('Price by City')
# plt.xlabel('City')
# plt.ylabel('Price')
# plt.xticks(rotation=90, ha='right')
# plt.tight_layout()
# plt.show()

# Count plot for Property Type by Country
plt.figure(figsize=(15, 6))
sns.countplot(data=data_project, x='country', hue='property_type', palette='pastel')
plt.title('Property Type Distribution by Country')
plt.xlabel('Country')
plt.ylabel('Count')
plt.xticks(rotation=45, ha='right')
plt.tight_layout()
plt.show()

# # Count plot for Property Type by top cities (let's take the top 10 most frequent cities for better readability)
# top_cities = data_project['city'].value_counts().nlargest(10).index
# data_top_cities = data_project[data_project['city'].isin(top_cities)]

# plt.figure(figsize=(20, 8))
# sns.countplot(data=data_top_cities, x='city', hue='property_type')
# plt.title('Property Type Distribution by Top 10 Cities')
# plt.xlabel('City')
# plt.ylabel('Count')
# plt.xticks(rotation=45, ha='right')
# plt.tight_layout()
# plt.show()

# Boxplot for price by neighbourhood rating
plt.figure(figsize=(10, 6))
sns.boxplot(data=data_project, x='neighbourhood_rating', y='price')
plt.title('Price by Neighbourhood Rating')
plt.xlabel('Neighbourhood Rating')
plt.ylabel('Price')
plt.show()

# Boxplot for price by connectivity score
plt.figure(figsize=(10, 6))
sns.boxplot(data=data_project, x='connectivity_score', y='price')
plt.title('Price by Connectivity Score')
plt.xlabel('Connectivity Score')
plt.ylabel('Price')
plt.show()

import matplotlib.pyplot as plt
import seaborn as sns

plt.figure(figsize=(12, 6))
sns.boxplot(data=data_project, x='property_type', y='rooms', palette='pastel')
plt.title('Number of rooms by property type')
plt.xlabel('Property type')
plt.ylabel('Number of rooms')
plt.xticks(rotation=45, ha='right')
plt.tight_layout()
plt.show()

import matplotlib.pyplot as plt
import seaborn as sns

plt.figure(figsize=(10, 6))
sns.countplot(data=data_project, x='property_type', hue='garden', palette='pastel')
plt.title('Property Type Distribution by Garden Availability')
plt.xlabel('Property Type')
plt.ylabel('Count')
plt.show()

import matplotlib.pyplot as plt
import seaborn as sns

plt.figure(figsize=(15, 8))
sns.scatterplot(data=data_project, x='property_size_sqft', y='price', hue='property_type', alpha=0.7)
plt.title('Relationship between Property Size and Price, by Property Type')
plt.xlabel('Property Size (sqft)')
plt.ylabel('Price')
plt.legend(title='Property Type')
plt.grid(True, linestyle='--', alpha=0.6)
plt.tight_layout()
plt.show()

import matplotlib.pyplot as plt
import seaborn as sns

plt.figure(figsize=(15, 8))
sns.scatterplot(data=data_project, x='customer_salary', y='loan_amount', hue='property_type', palette='viridis', alpha=0.7)
plt.title('Relationship between Customer Salary and Loan Amount, by Purchase Decision')
plt.xlabel('Customer Salary')
plt.ylabel('Loan Amount')
plt.legend(title='Purchase Decision', labels=['No Purchase', 'Purchase'])
plt.grid(True, linestyle='--', alpha=0.6)
plt.tight_layout()
plt.show()

import matplotlib.pyplot as plt
import seaborn as sns

plt.figure(figsize=(15, 8))
sns.scatterplot(data=data_project, x='customer_salary', y='loan_amount', hue='property_type', palette='viridis', alpha=0.7)
plt.title('Relationship between Customer Salary and Loan Amount, by Property Type')
plt.xlabel('Customer Salary')
plt.ylabel('Loan Amount')
plt.legend(title='Property Type')
plt.grid(True, linestyle='--', alpha=0.6)
plt.tight_layout()
plt.show()

import matplotlib.pyplot as plt
import seaborn as sns

plt.figure(figsize=(12, 6))
sns.boxplot(data=data_project, x='property_type', y='property_size_sqft', palette='pastel')
plt.title('Property Size by Property Type')
plt.xlabel('Property Type')
plt.ylabel('Property Size (sqft)')
plt.show()

import matplotlib.pyplot as plt
import seaborn as sns

plt.figure(figsize=(12, 6))
sns.boxplot(data=data_project, x='property_type', y='price')
plt.title('Price by Property Type')
plt.xlabel('Property Type')
plt.ylabel('Price')
plt.show()